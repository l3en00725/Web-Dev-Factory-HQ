---
import Base from '../../layouts/Base.astro';
import Container from '../../components/layout/Container.astro';
import Hero from '../../components/sections/Hero.astro';
import ServicesGrid from '../../components/sections/ServicesGrid.astro';
import CTA from '../../components/sections/CTA.astro';
import { generateBreadcrumbSchema } from '../../lib/structured-data/Breadcrumbs';
import { generateLocalBusinessSchema } from '../../lib/structured-data/LocalBusiness';
import settings from '../../content/settings.json';
import services from '../../content/services.json';
import locations from '../../content/locations.json';

const location = locations.find(l => l.slug === 'wildwood')!;
const title = `${location.title} Lawn Care & Landscaping | ${settings.title}`;
const description = location.description;

const siteUrl = settings.siteUrl;
const breadcrumbSchema = generateBreadcrumbSchema(
  [
    { name: 'Home', url: '/' },
    { name: 'Locations', url: '/locations' },
    { name: location.title, url: `/locations/${location.slug}` },
  ],
  siteUrl
);
const localBusinessSchema = generateLocalBusinessSchema(settings, location, siteUrl);

const structuredData = {
  '@graph': [breadcrumbSchema, localBusinessSchema],
};

const primaryServices = services.filter(s => s.isPrimary);
---

<Base 
  title={title} 
  description={description}
  structuredData={structuredData}
>
  <Hero
    headline={`Lawn Care in ${location.title}`}
    subheadline={`Professional landscaping and lawn maintenance services for ${location.city}, ${location.state}. Licensed, insured, and satisfaction guaranteed.`}
    ctaLabel="Get a Free Quote"
    ctaLink="/contact"
    secondaryCtaLabel="View Services"
    secondaryCtaLink="/services"
  />

  <section class="py-section-mobile lg:py-section-desktop bg-background">
    <Container>
      <div class="max-w-3xl mx-auto text-center mb-12">
        <h2 class="font-display text-3xl font-bold mb-6">Serving {location.title}, {location.state}</h2>
        <p class="text-lg text-foreground-secondary">{location.description}</p>
      </div>
    </Container>
  </section>

  <ServicesGrid 
    heading={`Our Services in ${location.title}`}
    subheading="We offer a full range of lawn care and landscaping services."
    services={primaryServices}
    showAll={true}
  />

  <CTA
    heading={`Ready to Get Started in ${location.title}?`}
    body="Contact us today for a free estimate. We're proud to serve the residents of this beautiful coastal community."
    buttonLabel="Contact Us"
    buttonLink="/contact"
    secondaryButtonLabel="Call Now"
    secondaryButtonLink={`tel:${settings.contact?.phone}`}
  />
</Base>

