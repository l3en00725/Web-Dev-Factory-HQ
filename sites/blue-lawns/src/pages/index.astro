---
import Layout from '../layouts/Base.astro';
import Hero from '../components/sections/Hero.astro';
import BrandValues from '../components/sections/BrandValues.astro';
import ProcessSteps from '../components/sections/ProcessSteps.astro';
import SocialProof from '../components/sections/SocialProof.astro';
import ServicesGrid from '../components/sections/ServicesGrid.astro';
import Benefits from '../components/sections/Benefits.astro';
import BeforeAfter from '../components/sections/BeforeAfter.astro';
import Testimonials from '../components/sections/Testimonials.astro';
import CTA from '../components/sections/CTA.astro';

import servicesData from '../content/services.json';
import settings from '../content/settings.json';

import heroMain from '../assets/images/general/hero-main.avif';
import heroMainWebp from '../assets/images/general/hero-main-optimized.webp';
import beforeYard from '../assets/images/general/before-yard.avif';
import afterYard from '../assets/images/general/after-yard.avif';

// Data Logic
const primaryServices = servicesData.filter(s => s.type === 'primary');
const secondaryServices = servicesData.filter(s => s.type === 'secondary');

// SEO-optimized title and description
const pageTitle = `${settings.title} | Premier Landscaping in Cape May County`;
const pageDescription = "Professional landscaping, lawn care, and hardscaping services for Avalon, Stone Harbor, Sea Isle City, and surrounding Cape May County areas. Licensed, insured, and satisfaction guaranteed.";
---

<Layout 
  title={pageTitle}
  description={pageDescription}
  headerVariant="transparent"
  headerMode="dark"
>
  <main>
    {/* 1. Hero */}
    <Hero 
      title="Love Your Lawn Again."
      subtitle="Professional landscaping for Cape May County. We handle the hard work, you handle the weekends."
      primaryCta={{ label: "Get Quote", href: "/contact" }}
      backgroundImage={heroMain}
      backgroundImageWebp={heroMainWebp}
      alignment="left"
    />

    {/* 2. Brand Values */}
    <BrandValues />

    {/* 3. Process Steps */}
    <ProcessSteps />

    {/* 4. Social Proof */}
    <SocialProof />

    {/* 5. Primary Services */}
    <ServicesGrid 
      heading="Complete Care for Your Coastal Home." 
      services={primaryServices}
      columns={3}
    />

    {/* 6. Secondary Services */}
    <div class="bg-gray-50">
      <ServicesGrid 
        heading="More Capabilities" 
        services={secondaryServices}
        columns={4}
      />
    </div>

    {/* 7. Benefits - Why Choose Us */}
    <Benefits 
      title="Not Your Average Landscaper."
      subtitle="The standard for excellence in coastal landscaping"
    />

    {/* 8. Before/After */}
    <BeforeAfter 
      beforeImage={beforeYard}
      afterImage={afterYard}
    />

    {/* 9. Testimonials */}
    <Testimonials />

    {/* 10. CTA */}
    <CTA />
  </main>
</Layout>
