---
import Container from '../layout/Container.astro';
import Button from '../ui/Button.astro';

interface PricingPlan {
  name: string;
  price: string;
  frequency?: string;
  description?: string;
  features?: string[];
  ctaLabel?: string;
  ctaLink?: string;
  highlighted?: boolean;
  badge?: string;
}

interface Props {
  heading?: string;
  subheading?: string;
  plans?: PricingPlan[];
  footnote?: string;
}

const { heading, subheading, plans = [], footnote } = Astro.props;
---

<section class="py-24 bg-neutral-50 relative overflow-hidden">
  {/* Background Decor */}
  <div class="absolute top-0 right-0 w-[600px] h-[600px] bg-primary-100/40 rounded-full blur-[80px] -translate-y-1/2 translate-x-1/3 pointer-events-none"></div>

  <Container class="relative z-10">
    {(heading || subheading) && (
      <div class="mb-20 text-center max-w-3xl mx-auto">
        {heading && (
          <h2 class="font-display text-4xl font-bold tracking-tight text-slate-900 lg:text-5xl mb-6">
            {heading}
          </h2>
        )}
        {subheading && (
          <p class="text-xl text-slate-500 leading-relaxed font-light">
            {subheading}
          </p>
        )}
      </div>
    )}

    <div class="grid gap-8 lg:grid-cols-3 lg:items-start max-w-7xl mx-auto">
      {plans.map((plan) => (
        <div 
          class:list={[
            "relative flex flex-col rounded-3xl p-8 transition-all duration-300",
            plan.highlighted 
              ? "bg-primary-900 text-white shadow-2xl shadow-primary-900/20 scale-105 z-10 ring-1 ring-white/10" 
              : "bg-white text-slate-900 shadow-lg hover:shadow-xl border border-neutral-100"
          ]}
        >
          {plan.highlighted && plan.badge && (
            <span class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 rounded-full bg-secondary-500 px-4 py-1 text-xs font-bold uppercase tracking-widest text-white shadow-lg">
              {plan.badge}
            </span>
          )}

          <div class="mb-8">
            <h3 class={`text-xl font-bold mb-2 ${plan.highlighted ? 'text-white' : 'text-slate-900'}`}>
              {plan.name}
            </h3>
            <p class={`text-sm ${plan.highlighted ? 'text-primary-200' : 'text-slate-500'}`}>
              {plan.description}
            </p>
          </div>

          <div class="mb-8 flex items-baseline gap-1">
            <span class="text-5xl font-display font-bold tracking-tight">
              {plan.price}
            </span>
            {plan.frequency && (
              <span class={`text-sm font-medium ${plan.highlighted ? 'text-primary-200' : 'text-slate-400'}`}>
                {plan.frequency}
              </span>
            )}
          </div>
          
          <ul class="mb-8 flex-1 space-y-4">
            {plan.features?.map((feature) => (
              <li class="flex items-start gap-3">
                <div class={`mt-1 flex h-5 w-5 items-center justify-center rounded-full ${plan.highlighted ? 'bg-primary-800 text-secondary-400' : 'bg-primary-50 text-primary-600'}`}>
                  <svg class="h-3 w-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
                </div>
                <span class={`text-sm ${plan.highlighted ? 'text-primary-100' : 'text-slate-600'}`}>
                  {feature}
                </span>
              </li>
            ))}
          </ul>

          {plan.ctaLabel && plan.ctaLink && (
            <Button 
              href={plan.ctaLink} 
              variant={plan.highlighted ? 'primary' : 'outline'} 
              class={`w-full justify-center ${plan.highlighted ? 'bg-secondary-500 hover:bg-secondary-600 border-transparent' : ''}`}
            >
              {plan.ctaLabel}
            </Button>
          )}
        </div>
      ))}
    </div>
    
    {footnote && (
      <div class="mt-12 text-center text-sm text-slate-400">
        <p>{footnote}</p>
      </div>
    )}
  </Container>
</section>
