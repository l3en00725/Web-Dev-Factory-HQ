---
import Container from '../layout/Container.astro';
import Card from '../ui/Card.astro';
import Image from '../base/Image.astro';

interface Testimonial {
  name: string;
  location: string;
  text: string;
  rating?: number;
  avatar?: string;
}

interface Props {
  title?: string;
  subtitle?: string;
  testimonials?: Testimonial[];
}

const defaultTestimonials: Testimonial[] = [
  {
    name: "Sarah Jenkins",
    location: "Cape May",
    text: "Blue Lawns transformed our backyard into a paradise. The team was professional, punctual, and the attention to detail was incredible.",
    rating: 5,
    avatar: "src/assets/images/avatars/avatar-1.png"
  },
  {
    name: "Michael Ross",
    location: "Avalon",
    text: "We've used several landscaping companies over the years, but none compare to Blue Lawns. Their weekly maintenance keeps our property looking perfect.",
    rating: 5,
    avatar: "src/assets/images/avatars/avatar-2.png"
  },
  {
    name: "Elena Rodriguez",
    location: "Stone Harbor",
    text: "Excellent service for our summer home. It's such a relief to arrive and find the pool and lawn in pristine condition every time.",
    rating: 5,
    avatar: "src/assets/images/avatars/avatar-3.png"
  }
];

const { 
  title = "What Our Neighbors Say", 
  subtitle = "Join hundreds of happy homeowners in Cape May County",
  testimonials = defaultTestimonials 
} = Astro.props;
---

<section class="py-24 bg-white relative overflow-hidden">
  {/* Background Pattern */}
  <div class="absolute inset-0 opacity-[0.03] pointer-events-none" style="background-image: radial-gradient(#0f172a 1px, transparent 1px); background-size: 32px 32px;"></div>

  <Container class="relative z-10">
    <div class="text-center max-w-3xl mx-auto mb-16">
      <h2 class="font-display text-4xl font-bold tracking-tight text-brand-navy lg:text-5xl mb-6">
        {title}
      </h2>
      <p class="text-xl text-slate-500 leading-relaxed font-light">
        {subtitle}
      </p>
    </div>

    <div class="grid gap-8 lg:grid-cols-3">
      {testimonials.map((t) => (
        <div class="bg-white rounded-2xl p-8 shadow-lg border border-slate-100 flex flex-col h-full hover:shadow-xl transition-shadow duration-300">
          <div class="flex items-center gap-4 mb-6">
            <div class="h-12 w-12 rounded-full overflow-hidden bg-slate-100 flex-shrink-0">
               <Image 
                  src={t.avatar || "src/assets/images/avatars/avatar-1.png"} 
                  alt={t.name}
                  width={48}
                  height={48}
                  class="h-full w-full object-cover"
                />
            </div>
            <div>
              <div class="font-bold text-brand-navy">{t.name}</div>
              <div class="text-sm text-slate-500">{t.location}</div>
            </div>
          </div>
          
          <div class="flex text-secondary-500 mb-4">
            {Array.from({ length: t.rating || 5 }).map(() => (
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 fill-current" viewBox="0 0 24 24">
                <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
              </svg>
            ))}
          </div>

          <p class="text-slate-600 leading-relaxed italic flex-grow">
            "{t.text}"
          </p>
        </div>
      ))}
    </div>
  </Container>
</section>

