---
import Container from '../layout/Container.astro';
import ContactForm from '../form/ContactForm.astro';
import Image from '../base/Image.astro';

interface Props {
  heading?: string;
  subheading?: string;
  showForm?: boolean;
  formType?: string;
  showMap?: boolean;
  showContactInfo?: boolean;
  layout?: 'form-left' | 'form-right' | 'stacked';
  contactEmail?: string;
  contactPhone?: string;
}

const { 
  heading = "Get In Touch", 
  subheading, 
  showForm = true, 
  showContactInfo = true, 
  layout = 'form-left',
  contactEmail,
  contactPhone
} = Astro.props;

const isReversed = layout === 'form-right';
---

<section class="py-section-mobile lg:py-section-desktop bg-surface">
  <Container class={`grid gap-section-gap-mobile lg:gap-section-gap lg:grid-cols-2 ${layout === 'stacked' ? 'lg:grid-cols-1 max-w-3xl' : ''}`}>
    <div class={isReversed ? "lg:order-2" : ""}>
      {heading && <h2 class="mb-6 font-display text-3xl font-bold lg:text-4xl">{heading}</h2>}
      {subheading && (
        <p class="text-lg text-foreground-secondary mb-8">
          {subheading}
        </p>
      )}
      
      {showContactInfo && (contactEmail || contactPhone) && (
        <div class="mt-8 space-y-4">
          {contactEmail && (
            <div class="flex items-center gap-3 text-foreground-secondary">
              <span class="font-semibold text-foreground">Email:</span>
              <a href={`mailto:${contactEmail}`} class="text-primary hover:underline">
                {contactEmail}
              </a>
            </div>
          )}
          {contactPhone && (
            <div class="flex items-center gap-3 text-foreground-secondary">
              <span class="font-semibold text-foreground">Phone:</span>
              <a href={`tel:${contactPhone.replace(/\s/g, '')}`} class="text-primary hover:underline">
                {contactPhone}
              </a>
            </div>
          )}
        </div>
      )}
    </div>

    {showForm && (
      <div class={`rounded-2xl border border-border bg-background p-8 shadow-sm transition-all duration-normal hover:shadow-md ${isReversed ? "lg:order-1" : ""}`}>
        <div class="mb-6">
          <h3 class="text-xl font-semibold">Send us a message</h3>
        </div>
        <ContactForm />
      </div>
    )}
  </Container>
</section>
