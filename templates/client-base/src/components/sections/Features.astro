---
import Container from '../layout/Container.astro';
import Card from '../ui/Card.astro';
import Image from '../sanity/Image.astro';

type GridColumnCount = 1 | 2 | 3 | 4 | 6;

interface FeatureItem {
  title: string;
  description?: string;
  icon?: string; // Schema says string (icon name), logic needed to map or render
  link?: string;
}

interface Props {
  heading?: string;
  subheading?: string;
  items?: FeatureItem[];
  columns?: GridColumnCount;
}

const { heading, subheading, items = [], columns = 3 } = Astro.props;

const gridCols: Record<GridColumnCount, string> = {
  1: 'grid-cols-1',
  2: 'lg:grid-cols-2',
  3: 'lg:grid-cols-3',
  4: 'lg:grid-cols-4',
  6: 'lg:grid-cols-6',
};
---

<section class="py-section-mobile lg:py-section-desktop bg-background">
  <Container>
    {(heading || subheading) && (
      <div class="mb-section-gap-mobile lg:mb-section-gap text-center max-w-2xl mx-auto">
        {heading && <h2 class="font-display text-3xl font-bold text-foreground lg:text-4xl">{heading}</h2>}
        {subheading && <p class="mt-4 text-foreground-secondary">{subheading}</p>}
      </div>
    )}

    <div class={`grid gap-8 sm:grid-cols-2 ${gridCols[columns] || 'lg:grid-cols-3'}`}>
      {items.map((item) => (
        <Card variant="default" class="flex flex-col gap-4 p-6 transition-all duration-normal hover:-translate-y-1 hover:shadow-lg group">
          {item.icon && (
            <div class="mb-2 flex h-12 w-12 items-center justify-center rounded-lg bg-primary-100 text-primary-600 transition-colors group-hover:bg-primary-200">
              <span class="text-2xl">{item.icon}</span>
            </div>
          )}
          <h3 class="text-xl font-semibold text-foreground">{item.title}</h3>
          {item.description && <p class="text-foreground-secondary flex-1">{item.description}</p>}
          {item.link && (
             <a href={item.link} class="mt-auto text-sm font-medium text-primary hover:text-primary-700 transition-colors duration-fast">
               Learn more <span aria-hidden="true">&rarr;</span>
             </a>
          )}
        </Card>
      ))}
    </div>
  </Container>
</section>
