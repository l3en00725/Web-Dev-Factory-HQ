---
import Container from '../layout/Container.astro';
import Button from '../ui/Button.astro';
import Image from '../base/Image.astro';
import PortableText from '../sanity/PortableText.astro';

interface Props {
  headline?: string;
  subheadline?: string; // Schema says text, not portable text block, but checking usage
  image?: any;
  overlayOpacity?: number;
  ctaLabel?: string;
  ctaLink?: string;
  secondaryCtaLabel?: string;
  secondaryCtaLink?: string;
  alignment?: 'left' | 'center' | 'right';
}

const { 
  headline, 
  subheadline, 
  image, 
  overlayOpacity = 40,
  ctaLabel, 
  ctaLink,
  secondaryCtaLabel,
  secondaryCtaLink,
  alignment = 'center' 
} = Astro.props;

const alignClass = {
  left: 'items-start text-left',
  center: 'items-center text-center',
  right: 'items-end text-right',
};
---

<section class="relative overflow-hidden bg-background-subtle py-section-mobile lg:py-section-desktop">
  <Container class={`grid gap-section-gap-mobile lg:gap-section-gap lg:grid-cols-2 lg:items-center ${alignment === 'center' ? 'mx-auto' : ''}`}>
    <div class={`flex flex-col gap-6 ${alignClass[alignment]}`}>
      {headline && (
        <h1 class="font-display text-4xl font-bold leading-tight tracking-tight text-foreground lg:text-6xl">
          {headline}
        </h1>
      )}
      {subheadline && (
        <p class="text-lg text-foreground-secondary max-w-prose">
          {subheadline}
        </p>
      )}
      
      <div class="flex flex-wrap gap-4">
        {ctaLabel && ctaLink && (
          <Button href={ctaLink} size="lg" variant="primary">
            {ctaLabel}
          </Button>
        )}
        {secondaryCtaLabel && secondaryCtaLink && (
          <Button href={secondaryCtaLink} size="lg" variant="outline">
            {secondaryCtaLabel}
          </Button>
        )}
      </div>
    </div>
    
    {image && (
      <div class="relative aspect-[4/3] w-full overflow-hidden rounded-2xl shadow-float lg:aspect-square">
        {overlayOpacity > 0 && (
          <div 
            class="absolute inset-0 z-10 bg-neutral-900" 
            style={`opacity: ${overlayOpacity / 100}`}
            aria-hidden="true"
          />
        )}
        <Image 
          src={image} 
          alt={headline || "Hero Image"} 
          class="h-full w-full object-cover transition-transform duration-slow hover:scale-105" 
          priority={true} 
        />
      </div>
    )}
  </Container>
</section>
