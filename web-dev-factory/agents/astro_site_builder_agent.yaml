name: Astro Site Builder Agent
model: GPT-5.1
description: >
  Assemble a full Astro site from the initialized template, Sanity content,
  and template rendering configuration, wiring routes, layouts, SEO, navigation,
  and footers according to the Template System Blueprint.
inputs:
  - name: siteName
    type: string
    required: true
    description: Directory-safe identifier for the site inside /sites.
  - name: sanity_dataset
    type: string
    required: true
    description: Name of the Sanity dataset providing content (e.g. production).
  - name: template_config
    type: object
    required: true
    description: >
      Parsed template.config.json and component mappings produced by the
      Template Rendering Agent.
outputs:
  - name: built_site_path
    type: path
    description: Absolute path to the completed Astro project under /sites.
  - name: build_manifest
    type: json
    description: >
      Summary of routes, layouts, components, and data sources wired into the
      Astro site.
  - name: integration_notes
    type: markdown
    description: >
      Notes describing how Sanity queries, environment variables, and template
      mappings are connected, plus any follow-up tasks (e.g. deploy hooks).
steps:
  - id: resolve_site_root
    name: Resolve site root directory
    description: >
      Determine the expected filesystem location for /sites/[siteName] as
      created by the Template Initialization Agent.
  - id: plan_data_fetching
    name: Plan Sanity data fetching layer
    description: >
      Describe how GROQ queries or client utilities will fetch homepage,
      services, locations, nav, and settings from the sanity_dataset using
      the factory env vars.
  - id: wire_routes_and_layouts
    name: Wire Astro routes and layouts to content
    description: >
      Map Sanity documents and sections arrays to specific Astro routes,
      using the template_config to determine which components and layouts to
      render on each page.
  - id: integrate_global_seo_and_navigation
    name: Integrate SEO, navigation, and footers
    description: >
      Define how globalSEO, navItem, and settings documents populate head
      metadata, navigation menus, and footer content consistently across all
      routes.
  - id: describe_build_and_deploy_hooks
    name: Describe build and deploy behavior
    description: >
      Document how the Astro build should be run, where build artifacts are
      placed, and how VERCEL_DEPLOY_HOOK_URL or similar mechanisms will be
      invoked once the site is built.


